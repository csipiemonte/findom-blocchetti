<#--
Copyright Regione Piemonte - 2020
SPDX-License-Identifier: EUPL-1.2-or-later
-->
[#-- _indicatori --] 
<#-- note di dipendenze da altre commonalities: la pagina in cui compare questa sezione e' abilitata se _caratteristicheProgetto sono state salvate -->

<script type="text/javascript">					
</script>

<h4>
	<span id="toggle_handle_indicatori" class="toggle_handle collapse">Indicatori
	[@contextualErrors errorList=(messages._indicatori)![] /]
	</span>
</h4>

<div class="toggle_target_indicatori">
 <p style="font-style: italic; font-weight: normal;">
 	 	<#if _indicatori_tipo_ante_post == "false" >
	 		Nel caso in cui vengano compilati indicatori di tipo 'Ante' è obbligatorio compilare i corrispondenti indicatori di tipo 'Post'
		</#if>
 </p>

	<table class="formTable" summary="....">
		<col width="10%" />
		<col width="80%" />
		<col width="10%" />
		<tr>
			<td></td>
			<td>
				<table class="myovertable tablesorter" summary="....">
					<col width="25%" />
					<col width="75%" />

					<thead>
						<tr>
							<th>Tipo indicatore</th>

							<th style="padding: 0px;">
								<table style="margin-bottom: 0px;">
									<colgroup>										
										<col width="50%" />
										<col width="10%" />
										<col width="15%" />
									</colgroup>
									<thead>										
										<th scope="col">Descrizione</th>
										<th scope="col">Unità di misura</th>
										<th scope="col">Valore</th>
									</thead>
								</table>

							</th>
						</tr>
					</thead>

					[#list tipoIndicatoreList as item]
					<tr>

						<td>${FTL_PLACEHOLDER}(item.descrTipoIndicatore)!?html}
						   <input type="hidden"
								  value="${FTL_PLACEHOLDER}(item.idTipoIndicatore)!?html}"
								  name="_indicatori.tipoIndicatoreList[${FTL_PLACEHOLDER}item_index}].idTipoIndicatore" />
						   <input type="hidden"
								  value="${FTL_PLACEHOLDER}(item.descrTipoIndicatore)!?html}"
								  name="_indicatori.tipoIndicatoreList[${FTL_PLACEHOLDER}item_index}].descrTipoIndicatore" />
								  
						   
						</td>
						<td colspan="3" style="padding: 0px;">
							<table style="margin-bottom: 0px;">
								<colgroup>
									
									<col width="50%" />
									<col width="10%" />
									<col width="15%" />
								</colgroup>
								<tbody>
									[#list item.indicatoriList as item2]
									<tr>
										[#if item2.linkIndicatore?has_content]
										<td>${FTL_PLACEHOLDER}(item2.descrIndicatore)!}
										    <input type="hidden"
								                   value="${FTL_PLACEHOLDER}(item2.idIndicatore)!?html}"
								                   name="_indicatori.tipoIndicatoreList[${FTL_PLACEHOLDER}item_index}].indicatoriList[${FTL_PLACEHOLDER}item2_index}].idIndicatore" />
										   
										   <input type="hidden"
								                  value="${FTL_PLACEHOLDER}(item2.codIndicatore)!?html}"
								                  name="_indicatori.tipoIndicatoreList[${FTL_PLACEHOLDER}item_index}].indicatoriList[${FTL_PLACEHOLDER}item2_index}].codIndicatore" />
										
										   <input type="hidden"
								                  value="${FTL_PLACEHOLDER}(item2.descrIndicatore)!?html}"
								                  name="_indicatori.tipoIndicatoreList[${FTL_PLACEHOLDER}item_index}].indicatoriList[${FTL_PLACEHOLDER}item2_index}].descrIndicatore" />
								                  
								           <input type="hidden"
								                  value="${FTL_PLACEHOLDER}(item2.unitaMisuraIndicatore)!?html}"
								                  name="_indicatori.tipoIndicatoreList[${FTL_PLACEHOLDER}item_index}].indicatoriList[${FTL_PLACEHOLDER}item2_index}].unitaMisuraIndicatore" />
										
										   <input type="hidden"
								                  value="${FTL_PLACEHOLDER}(item2.flagObbligatorio)!?html}"
								                  name="_indicatori.tipoIndicatoreList[${FTL_PLACEHOLDER}item_index}].indicatoriList[${FTL_PLACEHOLDER}item2_index}].flagObbligatorio" />
										
											<input type="hidden"
								                  value="${FTL_PLACEHOLDER}(item2.flagAlfa)!?html}"
								                  name="_indicatori.tipoIndicatoreList[${FTL_PLACEHOLDER}item_index}].indicatoriList[${FTL_PLACEHOLDER}item2_index}].flagAlfa" />
										
										   <a href="${FTL_PLACEHOLDER}(item2.linkIndicatore)!?html}" target="_blank">
				                              <img style="vertical-align: bottom" 
				                                   src="/ris/resources/application/finanziamenti/findomweb/css/im/ico_help_s.png" border="0"
				                                   title="${FTL_PLACEHOLDER}(item2.linkIndicatore)!?html}" height="20px" width="20px"/></a> 
										</td>
										[#else]
										<td>${FTL_PLACEHOLDER}(item2.descrIndicatore)!}
										    <input type="hidden"
								                   value="${FTL_PLACEHOLDER}(item2.idIndicatore)!?html}"
								                   name="_indicatori.tipoIndicatoreList[${FTL_PLACEHOLDER}item_index}].indicatoriList[${FTL_PLACEHOLDER}item2_index}].idIndicatore" />
										   
										   <input type="hidden"
								                  value="${FTL_PLACEHOLDER}(item2.codIndicatore)!?html}"
								                  name="_indicatori.tipoIndicatoreList[${FTL_PLACEHOLDER}item_index}].indicatoriList[${FTL_PLACEHOLDER}item2_index}].codIndicatore" />
										
										   <input type="hidden"
								                  value="${FTL_PLACEHOLDER}(item2.descrIndicatore)!?html}"
								                  name="_indicatori.tipoIndicatoreList[${FTL_PLACEHOLDER}item_index}].indicatoriList[${FTL_PLACEHOLDER}item2_index}].descrIndicatore" />
								                  
								           <input type="hidden"
								                  value="${FTL_PLACEHOLDER}(item2.unitaMisuraIndicatore)!?html}"
								                  name="_indicatori.tipoIndicatoreList[${FTL_PLACEHOLDER}item_index}].indicatoriList[${FTL_PLACEHOLDER}item2_index}].unitaMisuraIndicatore" />
								                  
								            <input type="hidden"
								                  value="${FTL_PLACEHOLDER}(item2.flagObbligatorio)!?html}"
								                  name="_indicatori.tipoIndicatoreList[${FTL_PLACEHOLDER}item_index}].indicatoriList[${FTL_PLACEHOLDER}item2_index}].flagObbligatorio" />
								                  
							                 <input type="hidden"
								                  value="${FTL_PLACEHOLDER}(item2.flagAlfa)!?html}"
								                  name="_indicatori.tipoIndicatoreList[${FTL_PLACEHOLDER}item_index}].indicatoriList[${FTL_PLACEHOLDER}item2_index}].flagAlfa" />
										
										</td>
										[/#if]
										<td>${FTL_PLACEHOLDER}(item2.unitaMisuraIndicatore)!}</td>
										<td>
										
										
										[#assign erroriIndicatori = false] 
							            [#if ((messages._indicatori_valore_testo)?has_content)]
							            [#if messages._indicatori_valore_id?seq_contains(item.idTipoIndicatore +"_"+item2.idIndicatore)]										
										<input type="text"								
								               id="id_valore_indicatore_${FTL_PLACEHOLDER}(item.idTipoIndicatore)!}_${FTL_PLACEHOLDER}(item2.idIndicatore)!}"
								               value="${FTL_PLACEHOLDER}(item2.valoreIndicatore)!?html}" 
								               name="_indicatori.tipoIndicatoreList[${FTL_PLACEHOLDER}item_index}].indicatoriList[${FTL_PLACEHOLDER}item2_index}].valoreIndicatore"	
								               						              
								               class="medium" style="border: 1px solid red; text-align:right; width: 80%"
								                              
							            />
										<span class="txtError">
							                <img src="/ris/resources/global/images/error.gif" alt="ci sono errori" title="ci sono errori" class="imError" />
								            <span>
								                [#list messages._indicatori_valore_testo as msg]								                      
								                      [#if msg?starts_with(item.idTipoIndicatore +"_"+item2.idIndicatore)!]
								                      
								                           errore:<br />${FTL_PLACEHOLDER}msg?remove_beginning(item.idTipoIndicatore +"_"+item2.idIndicatore)!}
								                      
								                      [/#if]								
								                [/#list]
								               
						                    </span>
							            </span>
							            [#assign erroriIndicatori = true] 
							            [/#if]
							            [/#if]
							
							            [#if erroriIndicatori==false]	
									    <input type="text"								
								               id="id_valore_indicatore_${FTL_PLACEHOLDER}(item.idTipoIndicatore)!}_${FTL_PLACEHOLDER}(item2.idIndicatore)!}"
								               value="${FTL_PLACEHOLDER}(item2.valoreIndicatore)!?html}" 
								               name="_indicatori.tipoIndicatoreList[${FTL_PLACEHOLDER}item_index}].indicatoriList[${FTL_PLACEHOLDER}item2_index}].valoreIndicatore"	
								               							              
								               class="medium" style="text-align:right; width: 80%"
							            />
									    [/#if]
									
									   </td>

									</tr>
									[/#list]
								</tbody>
							</table>
						</td>
					</tr>
					[/#list]
				</table>
			</td>
			<td></td>
		</tr>
	</table>
</div>
